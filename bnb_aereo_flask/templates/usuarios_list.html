<!-- templates/usuarios_list.html -->
{% extends "base.html" %}

{% block content %}
  <h2>Usuários</h2>

  <div style="margin: 16px 0;">
    <a href="{{ url_for('usuario_novo') }}" class="btn">Novo Usuário</a>
  </div>

  <!-- Formulário de filtro -->
  <form method="GET" action="{{ url_for('usuarios_list') }}" style="margin-bottom: 24px;">
    <div style="display: flex; gap: 12px; flex-wrap: wrap;">
      <input type="text" name="nome"
             placeholder="Filtrar por nome"
             value="{{ filtros.nome or '' }}" />
      <input type="text" name="email"
             placeholder="Filtrar por email"
             value="{{ filtros.email or '' }}" />
      <select name="tipo">
        <option value="">Todos os tipos</option>
        <option value="proprietario" {% if filtros.tipo == 'proprietario' %}selected{% endif %}>Proprietário</option>
        <option value="hospede" {% if filtros.tipo == 'hospede' %}selected{% endif %}>Hóspede</option>
      </select>
      <button type="submit" class="btn">Filtrar</button>
    </div>
  </form>

  <!-- Tabela de usuários -->
  <table class="table">
    <thead>
      <tr>
        <th>Nome</th>
        <th>Email</th>
        <th>Tipo</th>
        <th>CPF</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      {% for u in usuarios %}
        <tr>
          <td>{{ u.nome }}</td>
          <td>{{ u.email }}</td>
          <td>{{ u.tipo }}</td>
          <td>{{ u.cpf }}</td>
          <td>
            <a href="{{ url_for('usuario_editar', id=u.id) }}"
               class="btn" style="padding:6px 10px; font-size:0.9rem;">Editar</a>
            <form method="POST" action="{{ url_for('usuario_remover', id=u.id) }}"
                  style="display:inline;">
              <button type="submit" class="btn btn-danger"
                      style="padding:6px 10px; font-size:0.9rem;">Remover</button>
            </form>
          </td>
        </tr>
      {% endfor %}
      {% if usuarios|length == 0 %}
        <tr>
          <td colspan="5" style="text-align:center; padding:16px;">
            Nenhum usuário encontrado.
          </td>
        </tr>
      {% endif %}
    </tbody>
  </table>
{% endblock %}
