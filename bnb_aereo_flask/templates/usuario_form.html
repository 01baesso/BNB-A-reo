<!-- templates/usuario_form.html -->
{% extends "base.html" %}

{% block content %}
  {% if acao == "criar" %}
    <h2>Novo Usuário</h2>
    <form action="{{ url_for('usuario_criar') }}" method="POST">
  {% else %}
    <h2>Editar Usuário</h2>
    <form action="{{ url_for('usuario_atualizar', id=usuario.id) }}" method="POST">
  {% endif %}

    <label for="nome">Nome Completo *</label>
    <input type="text" id="nome" name="nome" required
           value="{{ usuario.nome or '' }}" />

    <label for="email">E-mail *</label>
    <input type="email" id="email" name="email" required
           value="{{ usuario.email or '' }}" />

    {% if acao == "criar" %}
      <label for="senha">Senha * (mín. 5 caracteres)</label>
      <input type="password" id="senha" name="senha" required minlength="5" />
    {% else %}
      <label for="senha">Senha (deixe vazio p/ não alterar)</label>
      <input type="password" id="senha" name="senha" />
    {% endif %}

    <label for="tipo">Tipo de Usuário *</label>
    {% if acao == "criar" %}
      <select id="tipo" name="tipo" required>
        <option value="">-- selecione --</option>
        <option value="proprietario" {% if usuario.tipo=='proprietario' %}selected{% endif %}>Proprietário</option>
        <option value="hospede" {% if usuario.tipo=='hospede' %}selected{% endif %}>Hóspede</option>
      </select>
    {% else %}
      <!-- Ao editar, não permitimos mudar o tipo -->
      <input type="text" value="{{ usuario.tipo }}" readonly style="background:#f0f0f0;" />
    {% endif %}

    <label for="telefone">Telefone</label>
    <input type="text" id="telefone" name="telefone"
           value="{{ usuario.telefone or '' }}" placeholder="(xx) xxxxx-xxxx" />

    {% if acao == "criar" %}
      <label for="cpf">CPF *</label>
      <input type="text" id="cpf" name="cpf" required value="{{ usuario.cpf or '' }}" />
    {% else %}
      <label for="cpf">CPF *</label>
      <input type="text" id="cpf" name="cpf" readonly value="{{ usuario.cpf }}" style="background:#f0f0f0;" />
    {% endif %}

    <div class="actions">
      <button type="submit" class="btn">
        {% if acao == "criar" %}Cadastrar{% else %}Atualizar{% endif %}
      </button>
      <a href="{{ url_for('usuarios_list') }}" class="btn btn-danger" style="margin-left:8px;">
        Cancelar
      </a>
    </div>
  </form>
{% endblock %}
